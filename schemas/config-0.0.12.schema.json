{"$defs": {"AgentConfig": {"properties": {"backend": {"discriminator": {"mapping": {"custom": "#/$defs/CustomBackendConfig", "openai": "#/$defs/OpenaiBackendConfig", "user": "#/$defs/UserBackendConfig"}, "propertyName": "type"}, "oneOf": [{"$ref": "#/$defs/OpenaiBackendConfig"}, {"$ref": "#/$defs/UserBackendConfig"}, {"$ref": "#/$defs/CustomBackendConfig"}], "title": "Backend"}, "system_template": {"anyOf": [{"type": "string"}, {"$ref": "#/$defs/CustomTemplateConfig"}], "title": "System Template"}, "user_template": {"anyOf": [{"type": "string"}, {"$ref": "#/$defs/CustomTemplateConfig"}], "title": "User Template"}, "session_summary_system_template": {"anyOf": [{"type": "string"}, {"$ref": "#/$defs/CustomTemplateConfig"}], "default": "Your name is {{ agent.name }}.\nYour task is to summarize the historical dialogue records according to the current scene, and summarize the most important information.", "title": "Session Summary System Template"}, "session_summary_user_template": {"anyOf": [{"type": "string"}, {"$ref": "#/$defs/CustomTemplateConfig"}], "default": "{% for event in agent.memory.get_memory_for_session(session_id) -%}\n{% if event.type_ == \"observe\" -%}\n{{ event.content }}\n{%- elif event.type_ == \"act\" -%}\n{{ agent.name }}({{ event.character.name }}): {{ event.content }}\n{%- endif %}\n{%- endfor %}\n{% for event in timeline.session_past_events(agent, session_id) -%}\n{% if event.type_ == \"session_act\" -%}\n{{ event.character.agent_name }}({{ event.character.name }}): {{ event.content }}\n{%- endif %}\n{%- endfor %}", "title": "Session Summary User Template"}}, "required": ["backend", "system_template", "user_template"], "title": "AgentConfig", "type": "object"}, "CharacterConfig": {"properties": {"description": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Description"}, "agent_name": {"title": "Agent Name", "type": "string"}, "props": {"items": {"discriminator": {"mapping": {"custom": "#/$defs/CustomPropConfig", "function": "#/$defs/FunctionPropConfig"}, "propertyName": "type"}, "oneOf": [{"$ref": "#/$defs/FunctionPropConfig"}, {"$ref": "#/$defs/CustomPropConfig"}]}, "title": "Props", "type": "array"}}, "required": ["agent_name"], "title": "CharacterConfig", "type": "object"}, "CustomBackendConfig": {"additionalProperties": true, "properties": {"type": {"const": "custom", "enum": ["custom"], "title": "Type", "type": "string"}, "path": {"title": "Path", "type": "string"}}, "required": ["type", "path"], "title": "CustomBackendConfig", "type": "object"}, "CustomDirectorConfig": {"additionalProperties": true, "properties": {"type": {"const": "custom", "enum": ["custom"], "title": "Type", "type": "string"}, "path": {"title": "Path", "type": "string"}}, "required": ["type", "path"], "title": "CustomDirectorConfig", "type": "object"}, "CustomFlowConfig": {"additionalProperties": true, "properties": {"type": {"const": "custom", "enum": ["custom"], "title": "Type", "type": "string"}, "path": {"title": "Path", "type": "string"}}, "required": ["type", "path"], "title": "CustomFlowConfig", "type": "object"}, "CustomHookConfig": {"additionalProperties": true, "properties": {"type": {"const": "custom", "enum": ["custom"], "title": "Type", "type": "string"}, "path": {"title": "Path", "type": "string"}}, "required": ["type", "path"], "title": "CustomHookConfig", "type": "object"}, "CustomPropConfig": {"additionalProperties": true, "properties": {"type": {"const": "custom", "enum": ["custom"], "title": "Type", "type": "string"}, "path": {"title": "Path", "type": "string"}}, "required": ["type", "path"], "title": "CustomPropConfig", "type": "object"}, "CustomScenePrepareConfig": {"additionalProperties": true, "properties": {"type": {"const": "custom", "enum": ["custom"], "title": "Type", "type": "string"}, "path": {"title": "Path", "type": "string"}}, "required": ["type", "path"], "title": "CustomScenePrepareConfig", "type": "object"}, "CustomTemplateConfig": {"properties": {"content": {"title": "Content", "type": "string"}, "custom_functions": {"additionalProperties": {"type": "string"}, "title": "Custom Functions", "type": "object"}}, "required": ["content"], "title": "CustomTemplateConfig", "type": "object"}, "FunctionPropConfig": {"properties": {"type": {"const": "function", "enum": ["function"], "title": "Type", "type": "string"}, "function": {"title": "Function", "type": "string"}, "exception_template": {"anyOf": [{"type": "string"}, {"$ref": "#/$defs/CustomTemplateConfig"}], "default": "Function returned an error:\n{{ exc.__class__.__name__ }}: {{ exc }}", "title": "Exception Template"}}, "required": ["type", "function"], "title": "FunctionPropConfig", "type": "object"}, "FunctionScenePrepareConfig": {"properties": {"type": {"const": "function", "enum": ["function"], "title": "Type", "type": "string"}, "function": {"title": "Function", "type": "string"}}, "required": ["type", "function"], "title": "FunctionScenePrepareConfig", "type": "object"}, "ModelDirectorConfig": {"properties": {"type": {"const": "model", "enum": ["model"], "title": "Type", "type": "string"}, "backend": {"discriminator": {"mapping": {"custom": "#/$defs/CustomBackendConfig", "openai": "#/$defs/OpenaiBackendConfig", "user": "#/$defs/UserBackendConfig"}, "propertyName": "type"}, "oneOf": [{"$ref": "#/$defs/OpenaiBackendConfig"}, {"$ref": "#/$defs/UserBackendConfig"}, {"$ref": "#/$defs/CustomBackendConfig"}], "title": "Backend"}, "system_template": {"anyOf": [{"type": "string"}, {"$ref": "#/$defs/CustomTemplateConfig"}], "title": "System Template"}, "user_template": {"anyOf": [{"type": "string"}, {"$ref": "#/$defs/CustomTemplateConfig"}], "title": "User Template"}, "allowed_scenes": {"anyOf": [{"items": {"type": "string"}, "type": "array"}, {"type": "null"}], "default": null, "title": "Allowed Scenes"}, "finish_flag": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Finish Flag"}}, "required": ["type", "backend", "system_template", "user_template"], "title": "ModelDirectorConfig", "type": "object"}, "ModelFlowConfig": {"properties": {"type": {"const": "model", "enum": ["model"], "title": "Type", "type": "string"}, "backend": {"discriminator": {"mapping": {"custom": "#/$defs/CustomBackendConfig", "openai": "#/$defs/OpenaiBackendConfig", "user": "#/$defs/UserBackendConfig"}, "propertyName": "type"}, "oneOf": [{"$ref": "#/$defs/OpenaiBackendConfig"}, {"$ref": "#/$defs/UserBackendConfig"}, {"$ref": "#/$defs/CustomBackendConfig"}], "title": "Backend"}, "system_template": {"anyOf": [{"type": "string"}, {"$ref": "#/$defs/CustomTemplateConfig"}], "title": "System Template"}, "user_template": {"anyOf": [{"type": "string"}, {"$ref": "#/$defs/CustomTemplateConfig"}], "title": "User Template"}, "allowed_characters": {"anyOf": [{"items": {"type": "string"}, "type": "array"}, {"type": "null"}], "default": null, "title": "Allowed Characters"}, "begin_character": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Begin Character"}, "fallback_character": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Fallback Character"}}, "required": ["type", "backend", "system_template", "user_template"], "title": "ModelFlowConfig", "type": "object"}, "NeverDirectorConfig": {"properties": {"type": {"const": "never", "enum": ["never"], "title": "Type", "type": "string"}}, "required": ["type"], "title": "NeverDirectorConfig", "type": "object"}, "OpenaiBackendAutoToolChoiceConfig": {"properties": {"type": {"const": "auto", "enum": ["auto"], "title": "Type", "type": "string"}}, "required": ["type"], "title": "OpenaiBackendAutoToolChoiceConfig", "type": "object"}, "OpenaiBackendConfig": {"properties": {"type": {"const": "openai", "enum": ["openai"], "title": "Type", "type": "string"}, "model": {"title": "Model", "type": "string"}, "temperature": {"anyOf": [{"type": "number"}, {"type": "null"}], "default": null, "title": "Temperature"}, "api_key": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Api Key"}, "base_url": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Base Url"}, "max_retries": {"default": 2, "title": "Max Retries", "type": "integer"}, "response_format": {"default": "text", "enum": ["text", "json_object"], "title": "Response Format", "type": "string"}, "tool_choice": {"default": {"type": "auto"}, "discriminator": {"mapping": {"auto": "#/$defs/OpenaiBackendAutoToolChoiceConfig", "function": "#/$defs/OpenaiBackendFunctionToolChoiceConfig"}, "propertyName": "type"}, "oneOf": [{"$ref": "#/$defs/OpenaiBackendAutoToolChoiceConfig"}, {"$ref": "#/$defs/OpenaiBackendFunctionToolChoiceConfig"}], "title": "Tool Choice"}, "prop_validation_error_template": {"anyOf": [{"type": "string"}, {"$ref": "#/$defs/CustomTemplateConfig"}], "default": "Function parameters validation failed:\n{% for err in exc.errors() -%}\nField name: {{ err[\"loc\"] | join(\".\") }}\nError message: {{ err[\"msg\"] }}\n{%- endfor %}", "title": "Prop Validation Error Template"}}, "required": ["type", "model"], "title": "OpenaiBackendConfig", "type": "object"}, "OpenaiBackendFunctionToolChoiceConfig": {"properties": {"type": {"const": "function", "enum": ["function"], "title": "Type", "type": "string"}, "function": {"title": "Function", "type": "string"}}, "required": ["type", "function"], "title": "OpenaiBackendFunctionToolChoiceConfig", "type": "object"}, "OrderFlowConfig": {"properties": {"type": {"const": "order", "enum": ["order"], "title": "Type", "type": "string"}, "order": {"anyOf": [{"items": {"type": "string"}, "type": "array"}, {"type": "null"}], "default": null, "title": "Order"}}, "required": ["type"], "title": "OrderFlowConfig", "type": "object"}, "PrefaceScenePrepareConfig": {"properties": {"type": {"const": "preface", "enum": ["preface"], "title": "Type", "type": "string"}, "character_name": {"title": "Character Name", "type": "string"}, "content": {"title": "Content", "type": "string"}}, "required": ["type", "character_name", "content"], "title": "PrefaceScenePrepareConfig", "type": "object"}, "SceneConfig": {"properties": {"description": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Description"}, "prepare": {"items": {"discriminator": {"mapping": {"custom": "#/$defs/CustomScenePrepareConfig", "function": "#/$defs/FunctionScenePrepareConfig", "preface": "#/$defs/PrefaceScenePrepareConfig"}, "propertyName": "type"}, "oneOf": [{"$ref": "#/$defs/PrefaceScenePrepareConfig"}, {"$ref": "#/$defs/FunctionScenePrepareConfig"}, {"$ref": "#/$defs/CustomScenePrepareConfig"}]}, "title": "Prepare", "type": "array"}, "characters": {"additionalProperties": {"$ref": "#/$defs/CharacterConfig"}, "title": "Characters", "type": "object"}, "flow": {"discriminator": {"mapping": {"custom": "#/$defs/CustomFlowConfig", "model": "#/$defs/ModelFlowConfig", "order": "#/$defs/OrderFlowConfig", "user": "#/$defs/UserFlowConfig"}, "propertyName": "type"}, "oneOf": [{"$ref": "#/$defs/OrderFlowConfig"}, {"$ref": "#/$defs/ModelFlowConfig"}, {"$ref": "#/$defs/UserFlowConfig"}, {"$ref": "#/$defs/CustomFlowConfig"}], "title": "Flow"}, "director": {"discriminator": {"mapping": {"custom": "#/$defs/CustomDirectorConfig", "model": "#/$defs/ModelDirectorConfig", "never": "#/$defs/NeverDirectorConfig", "user": "#/$defs/UserDirectorConfig"}, "propertyName": "type"}, "oneOf": [{"$ref": "#/$defs/ModelDirectorConfig"}, {"$ref": "#/$defs/UserDirectorConfig"}, {"$ref": "#/$defs/NeverDirectorConfig"}, {"$ref": "#/$defs/CustomDirectorConfig"}], "title": "Director"}}, "required": ["characters", "flow", "director"], "title": "SceneConfig", "type": "object"}, "SummaryHookConfig": {"properties": {"type": {"const": "summary", "enum": ["summary"], "title": "Type", "type": "string"}, "agent_names": {"anyOf": [{"items": {"type": "string"}, "type": "array"}, {"type": "null"}], "default": null, "title": "Agent Names"}}, "required": ["type"], "title": "SummaryHookConfig", "type": "object"}, "UserBackendConfig": {"properties": {"type": {"const": "user", "enum": ["user"], "title": "Type", "type": "string"}}, "required": ["type"], "title": "UserBackendConfig", "type": "object"}, "UserDirectorConfig": {"properties": {"type": {"const": "user", "enum": ["user"], "title": "Type", "type": "string"}}, "required": ["type"], "title": "UserDirectorConfig", "type": "object"}, "UserFlowConfig": {"properties": {"type": {"const": "user", "enum": ["user"], "title": "Type", "type": "string"}}, "required": ["type"], "title": "UserFlowConfig", "type": "object"}}, "properties": {"agents": {"additionalProperties": {"$ref": "#/$defs/AgentConfig"}, "title": "Agents", "type": "object"}, "scenes": {"additionalProperties": {"$ref": "#/$defs/SceneConfig"}, "title": "Scenes", "type": "object"}, "opening_scene": {"title": "Opening Scene", "type": "string"}, "hooks": {"items": {"discriminator": {"mapping": {"custom": "#/$defs/CustomHookConfig", "summary": "#/$defs/SummaryHookConfig"}, "propertyName": "type"}, "oneOf": [{"$ref": "#/$defs/SummaryHookConfig"}, {"$ref": "#/$defs/CustomHookConfig"}]}, "title": "Hooks", "type": "array"}}, "required": ["agents", "scenes", "opening_scene"], "title": "OperagentsConfig", "type": "object"}